name: containeruser-vf-mesn-virtual
prefix: __lab-name
mgmt:
  network: clab
  ipv4-gw: 10.4.169.1

topology:
  nodes:
    CLS1:
      kind: vr-sros
      image: vrnetlab/vr-sros:22.10.R5
      type: 'cp: cpu=2 min_ram=4 chassis=sr-12 slot=A card=cpm5 sfm=m-sfm5-12 ___ lc: cpu=2 min_ram=4 max_nics=2 chassis=sr-12 slot=1 card=iom4-e-b  mda/1=me1-100gb-cfp2 mda/2=me1-100gb-cfp2 sfm=m-sfm5-12 ___ lc: cpu=2 min_ram=4 max_nics=11 chassis=sr-12 slot=2 card=iom4-e-b  mda/1=me1-100gb-cfp2 mda/2=me10-10gb-sfp+ sfm=m-sfm5-12'
      license: /vsim_license/license.txt
      mgmt-ipv4: 10.4.169.33
      startup-config: configs/CLS1_STGCLS1.cfg
      binds:
        - /home/schimanskir@ion.de.alcatel-lucent.com/vf-virt-mesn/komodo2-mesn-clab/shared-setup-current/post-boot-exec.cfg:/tftpboot/post-boot-exec.cfg
      group: Aggregation
    CLS2:
      kind: vr-sros
      image: vrnetlab/vr-sros:22.10.R5
      type: 'cp: cpu=2 min_ram=4 chassis=sr-12 slot=A card=cpm5 sfm=m-sfm5-12 ___ lc: cpu=2 min_ram=4 max_nics=2 chassis=sr-12 slot=1 card=iom4-e-b  mda/1=me1-100gb-cfp2 mda/2=me1-100gb-cfp2 sfm=m-sfm5-12 ___ lc: cpu=2 min_ram=4 max_nics=11 chassis=sr-12 slot=2 card=iom4-e-b  mda/1=me1-100gb-cfp2 mda/2=me10-10gb-sfp+ sfm=m-sfm5-12'
      license: /vsim_license/license.txt
      mgmt-ipv4: 10.4.169.34
      startup-config: configs/CLS2_STGCLS2.cfg
      binds:
        - /home/schimanskir@ion.de.alcatel-lucent.com/vf-virt-mesn/komodo2-mesn-clab/shared-setup-current/post-boot-exec.cfg:/tftpboot/post-boot-exec.cfg
      group: Aggregation
    DLS1:
      kind: vr-sros
      image: vrnetlab/vr-sros:22.10.R5
      type: 'cp: cpu=2 min_ram=4 chassis=xrs-20 slot=A card=cpm-x20 sfm=sfm-x20-b ___ lc: cpu=2 min_ram=4 max_nics=24 chassis=xrs-20 slot=1 card=xcm-x20  mda/1=x4-100g-cfp2 mda/2=cx20-10g-sfp sfm=sfm-x20-b'
      license: /vsim_license/license.txt
      mgmt-ipv4: 10.4.169.35
      startup-config: configs/DLS1_STGDLS1.cfg
      binds:
        - /home/schimanskir@ion.de.alcatel-lucent.com/vf-virt-mesn/komodo2-mesn-clab/shared-setup-current/post-boot-exec.cfg:/tftpboot/post-boot-exec.cfg
      group: Aggregation
    DLS2:
      kind: vr-sros
      image: vrnetlab/vr-sros:22.10.R5
      type: 'cp: cpu=2 min_ram=4 chassis=sr-14s slot=A card=cpm-s sfm=sfm-s ___ lc: cpu=2 min_ram=8 max_nics=36 chassis=sr-14s slot=1 card=xcm-14s  mda/1=s36-400gb-qsfpdd sfm=sfm-s'
      license: /vsim_license/license.txt
      mgmt-ipv4: 10.4.169.36
      startup-config: configs/DLS2_STGDLS2.cfg
      binds:
        - /home/schimanskir@ion.de.alcatel-lucent.com/vf-virt-mesn/komodo2-mesn-clab/shared-setup-current/post-boot-exec.cfg:/tftpboot/post-boot-exec.cfg
      group: Aggregation
    POS1:
      kind: vr-sros
      image: vrnetlab/vr-sros:22.10.R5
      type: 'cp: cpu=2 min_ram=4 chassis=sr-7 slot=A card=cpm5 sfm=m-sfm5-7 ___ lc: cpu=2 min_ram=4 max_nics=2 chassis=sr-7 slot=1 card=iom4-e-b  mda/1=me1-100gb-cfp2 mda/2=me1-100gb-cfp2 sfm=m-sfm5-7 ___ lc: cpu=2 min_ram=4 max_nics=10 chassis=sr-7 slot=2 card=iom4-e-b  mda/1=me10-10gb-sfp+ sfm=m-sfm5-7'
      license: /vsim_license/license.txt
      mgmt-ipv4: 10.4.169.37
      startup-config: configs/POS1_STGPOS1.cfg
      binds:
        - /home/schimanskir@ion.de.alcatel-lucent.com/vf-virt-mesn/komodo2-mesn-clab/shared-setup-current/post-boot-exec.cfg:/tftpboot/post-boot-exec.cfg
      group: Aggregation
    # POS2:
    #   kind: vr-sros
    #   image: vrnetlab/vr-sros:22.10.R5
    #   # type: 'cp: cpu=2 min_ram=4 chassis=sr-2s slot=A card=cpm-2s sfm=sfm-2s ___ lc: cpu=2 min_ram=6 max_nics=18 chassis=sr-2s slot=1 card=xcm-2s  mda/1=ms18-100gb-qsfp28 sfm=sfm-2s'
    #   type: 'cp: cpu=2 min_ram=4 chassis=sr-2s slot=A card=cpm-2s sfm=sfm-2s ___ lc: cpu=2 min_ram=6 max_nics=18 chassis=sr-2s card=xcm-2s xiom/x1=ioms-3.0t mda/x1/1=ms18-100gb-qsfp28'
    #   license: /vsim_license/license.txt
    #   mgmt-ipv4: 10.4.169.45
    #   startup-config: configs/POS2_STGPOS2.cfg
    #   group: Aggregation
    # POS eigentlich mit xiom etc. und level er3000g+
    POS2:
      kind: vr-sros
      image: vrnetlab/vr-sros:22.10.R5
      type: 'cp: cpu=2 min_ram=4 chassis=sr-2s slot=A card=cpm-2s sfm=sfm-2s ___ lc: cpu=2 min_ram=6 max_nics=18 chassis=sr-2s slot=1 card=xcm-2s  mda/1=s18-100gb-qsfp28 sfm=sfm-2s'
      license: /vsim_license/license.txt
      mgmt-ipv4: 10.4.169.38
      startup-config: configs/POS2_STGPOS2.cfg
      binds:
        - /home/schimanskir@ion.de.alcatel-lucent.com/vf-virt-mesn/komodo2-mesn-clab/shared-setup-current/post-boot-exec.cfg:/tftpboot/post-boot-exec.cfg
      group: Aggregation
    MPS:
      kind: vr-sros
      image: vrnetlab/vr-sros:22.10.R5
      type: cpu=4 min_ram=4 max_nics=30 chassis=ixr-r6 slot=A card=cpiom-ixr-r6 slot=1 card=cpiom-ixr-r6 mda/1=m10-10g-sfp+ mda/3=m20-1g-csfp
      license: /vsim_license/license.txt
      mgmt-ipv4: 10.4.169.39
      startup-config: configs/MPS_STGMPS.cfg
      binds:
        - /home/schimanskir@ion.de.alcatel-lucent.com/vf-virt-mesn/komodo2-mesn-clab/shared-setup-current/post-boot-exec.cfg:/tftpboot/post-boot-exec.cfg
      group: Aggregation
    COS:
      kind: vr-sros
      image: vrnetlab/vr-sros:22.10.R5
      type: 'cp: cpu=2 min_ram=4 chassis=sr-a8 slot=A card=cpm-a ___ lc: cpu=2 min_ram=4 max_nics=32 chassis=sr-a8 slot=1 card=iom-a  mda/1=ma2-10gb-sfp+12-1gb-sfp'
      license: /vsim_license/license.txt
      mgmt-ipv4: 10.4.169.40
      startup-config: configs/COS_STGCOS.cfg
      binds:
        - /home/schimanskir@ion.de.alcatel-lucent.com/vf-virt-mesn/komodo2-mesn-clab/shared-setup-current/post-boot-exec.cfg:/tftpboot/post-boot-exec.cfg
      group: Aggregation
    MSD1:
      kind: vr-sros
      image: vrnetlab/vr-sros:22.10.R5
      type: 'cp: cpu=2 min_ram=4 chassis=ixr-e slot=A card=cpm-ixr-e/imm24-sfp++8-sfp28+2-qsfp28 ___ lc: cpu=2 min_ram=4 max_nics=34 chassis=ixr-e slot=1 card=imm24-sfp++8-sfp28+2-qsfp28  mda/1=m24-sfp++8-sfp28+2-qsfp28'
      license: /vsim_license/license.txt
      mgmt-ipv4: 10.4.169.41
      startup-config: configs/MSD1_STGMSD1.cfg
      binds:
        - /home/schimanskir@ion.de.alcatel-lucent.com/vf-virt-mesn/komodo2-mesn-clab/shared-setup-current/post-boot-exec.cfg:/tftpboot/post-boot-exec.cfg
      group: Aggregation
    MSD2:
      kind: vr-sros
      image: vrnetlab/vr-sros:22.10.R5
      type: 'cp: cpu=2 min_ram=4 chassis=ixr-e slot=A card=cpm-ixr-e/imm24-sfp++8-sfp28+2-qsfp28 ___ lc: cpu=2 min_ram=4 max_nics=34 chassis=ixr-e slot=1 card=imm24-sfp++8-sfp28+2-qsfp28  mda/1=m24-sfp++8-sfp28+2-qsfp28'
      license: /vsim_license/license.txt
      mgmt-ipv4: 10.4.169.42
      startup-config: configs/MSD2_STGMSD2.cfg
      binds:
        - /home/schimanskir@ion.de.alcatel-lucent.com/vf-virt-mesn/komodo2-mesn-clab/shared-setup-current/post-boot-exec.cfg:/tftpboot/post-boot-exec.cfg
      group: Aggregation
    CSD1:
      kind: vr-sros
      image: vrnetlab/vr-sros:22.10.R5
      type: 'cp: cpu=2 min_ram=4 chassis=ixr-e slot=A card=cpm-ixr-e/imm24-sfp++8-sfp28+2-qsfp28 ___ lc: cpu=2 min_ram=4 max_nics=34 chassis=ixr-e slot=1 card=imm24-sfp++8-sfp28+2-qsfp28  mda/1=m24-sfp++8-sfp28+2-qsfp28'
      license: /vsim_license/license.txt
      mgmt-ipv4: 10.4.169.43
      startup-config: configs/CSD1_STGCSD1.cfg
      binds:
        - /home/schimanskir@ion.de.alcatel-lucent.com/vf-virt-mesn/komodo2-mesn-clab/shared-setup-current/post-boot-exec.cfg:/tftpboot/post-boot-exec.cfg
      group: Aggregation
    CSD2:
      kind: vr-sros
      image: vrnetlab/vr-sros:22.10.R5
      type: 'cp: cpu=2 min_ram=4 chassis=ixr-e slot=A card=cpm-ixr-e/imm24-sfp++8-sfp28+2-qsfp28 ___ lc: cpu=2 min_ram=4 max_nics=34 chassis=ixr-e slot=1 card=imm24-sfp++8-sfp28+2-qsfp28  mda/1=m24-sfp++8-sfp28+2-qsfp28'
      license: /vsim_license/license.txt
      mgmt-ipv4: 10.4.169.44
      startup-config: configs/CSD2_STGCSD2.cfg
      binds:
        - /home/schimanskir@ion.de.alcatel-lucent.com/vf-virt-mesn/komodo2-mesn-clab/shared-setup-current/post-boot-exec.cfg:/tftpboot/post-boot-exec.cfg
      group: Aggregation
      
    topoviewer:
      kind: linux
      image: ghcr.io/asadarafat/topoviewer:nightly-23.10.17
      ports: 
        - 8123:8080
      startup-delay: 4
      exec:
      - '/opt/topoviewer/topoviewer clab -H 10.4.0.169 -P 8080 -u schimanskir -p 1sLampe! -j local-bind/topo-file.json' 
      binds:
        - __clabDir__/topology-data.json:/opt/topoviewer/local-bind/topo-file.json:ro
        - /var/run/docker.sock:/var/run/docker.sock:ro 
  links:
  - endpoints:
    - CLS1:eth3
    - CLS2:eth3
  - endpoints:
    - CLS1:eth1
    - DLS1:eth1
  - endpoints:
    - CLS1:eth2
    - DLS2:eth1
  - endpoints:
    - CLS2:eth1
    - DLS2:eth2
  - endpoints:
    - CLS2:eth2
    - DLS1:eth2
  - endpoints:
    - DLS1:eth3
    - POS2:eth1
  - endpoints:
    - DLS1:eth4
    - POS1:eth1
  - endpoints:
    - DLS2:eth3
    - POS2:eth2
  - endpoints:
    - DLS2:eth4
    - POS1:eth2
  - endpoints:
    - POS1:eth3
    - MSD1:eth1
  - endpoints:
    - POS1:eth4
    - MPS:eth1
  - endpoints:
    - POS1:eth5
    - COS:eth1
  - endpoints:
    - POS2:eth3
    - COS:eth2
  - endpoints:
    - POS2:eth4
    - MPS:eth2
  - endpoints:
    - MPS:eth3
    - MSD2:eth1
  - endpoints:
    - MSD1:eth2
    - CSD1:eth1
  - endpoints:
    - MSD2:eth2
    - CSD2:eth1